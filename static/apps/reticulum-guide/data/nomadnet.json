{
  "title": "NomadNet",
  "sections": [
    {
      "id": "what-is-nomadnet",
      "title": "What NomadNet Does",
      "content": "<p>NomadNet turns Reticulum into something usable: a terminal-based client for messaging and browsing content hosted on mesh nodes. Think of it as the web browser and email client for infrastructure-independent networks.</p><h4>Two Functions</h4><ul><li><strong>Client:</strong> Browse pages hosted on other nodes, send/receive encrypted messages</li><li><strong>Node:</strong> Host your own pages and files, act as LXMF propagation node</li></ul><h4>LFM Node</h4><p>Connect to <code>2eabad04f9145d32a6a3eda285d66c39</code> to see a working example with:</p><ul><li>Quick Chat (bridged to Matrix)</li><li>HF Propagation calculator</li><li>Live crypto ticker</li><li>GitHub activity feed</li><li>Net schedules with countdown timers</li><li>FEMA frequency reference</li><li>Power planner for portable ops</li></ul>"
    },
    {
      "id": "installation",
      "title": "Installation",
      "content": "<pre><code># Install NomadNet (use pipx or venv)\npipx install nomadnet\n\n# First run (creates config)\nnomadnet</code></pre><p>Press <code>Ctrl+C</code> to exit. Config is at <code>~/.nomadnetwork/config</code>.</p><p><strong>Note:</strong> Direct <code>pip install</code> fails on most modern systems. Use <code>pipx</code> or create a venv first.</p><h4>As a Background Service</h4><p>To run NomadNet as a daemon (for hosting a node):</p><pre><code>nomadnet --daemon</code></pre><h4>Systemd Service</h4><pre><code># /etc/systemd/system/nomadnet.service\n[Unit]\nDescription=NomadNet\nAfter=network.target\n\n[Service]\nType=simple\nUser=user\nExecStart=/home/user/.local/bin/nomadnet --daemon\nRestart=always\nEnvironment=PATH=/home/user/.local/bin:/usr/bin\n\n[Install]\nWantedBy=multi-user.target</code></pre><pre><code>sudo systemctl enable nomadnet\nsudo systemctl start nomadnet</code></pre>"
    },
    {
      "id": "browsing",
      "title": "Browsing Nodes",
      "content": "<h4>Connect to a Node</h4><ol><li>Run <code>nomadnet</code></li><li>Press <code>Tab</code> to reach the Network tab</li><li>Press <code>Ctrl+L</code> to enter a destination</li><li>Paste: <code>2eabad04f9145d32a6a3eda285d66c39</code></li><li>Wait for connection (may take a few seconds over testnet)</li></ol><p>You should see the LFM node's index page with links to articles, tools, and live data.</p><h4>Navigation</h4><ul><li><code>Tab</code> / <code>Shift+Tab</code>: Switch between panes</li><li><code>Enter</code>: Follow a link</li><li><code>Backspace</code>: Go back</li><li><code>Ctrl+L</code>: Enter destination manually</li><li><code>q</code> or <code>Ctrl+C</code>: Quit</li></ul>"
    },
    {
      "id": "messaging",
      "title": "Sending Messages",
      "content": "<p>NomadNet includes LXMF messaging. Messages are encrypted end-to-end and can be delivered directly or stored on propagation nodes for offline recipients.</p><h4>Send a Message</h4><ol><li>Go to Conversations tab</li><li>Press <code>n</code> for new conversation</li><li>Enter recipient's destination hash</li><li>Type your message and send</li></ol><h4>Receive Messages When Offline</h4><p>Configure a propagation node in <code>~/.nomadnetwork/config</code>:</p><pre><code>[propagation]\n  propagation_node = a21f547bc1f70043a28c4e2d5b04e570</code></pre><p>The LFM propagation node will store messages for you until you come online.</p>"
    },
    {
      "id": "hosting-node",
      "title": "Hosting Your Own Node",
      "content": "<p>Turn your device into a content server on the mesh.</p><h4>Enable Node Hosting</h4><p>Edit <code>~/.nomadnetwork/config</code>:</p><pre><code>[node]\nenable_node = yes\nnode_name = Your_Node_Name\nannounce_interval = 5\nannounce_at_start = Yes\ndisable_propagation = No</code></pre><h4>Directory Structure</h4><pre><code>~/.nomadnetwork/\n├── config\n└── storage/\n    ├── pages/        # Your .mu page files\n    │   └── index.mu  # Landing page\n    └── files/        # Downloadable files</code></pre><h4>File Permissions</h4><ul><li>Static pages: <code>644</code> (no execute bit)</li><li>Dynamic pages: <code>755</code> (executable)</li></ul>"
    },
    {
      "id": "micron-markup",
      "title": "Micron Markup",
      "content": "<p>NomadNet pages use Micron markup. From LFM production pages:</p><h4>Text Formatting</h4><pre><code>`!bold text`!\n`F777gray text`f\n`=monospace block`=</code></pre><h4>Centering</h4><pre><code>`c`!CENTERED TITLE`!`a</code></pre><p>Use <code>`c</code> to start centering, <code>`a</code> to end.</p><h4>Headers and Dividers</h4><pre><code>>Section Header\n\n-       # Single line divider\n-=      # Double line divider</code></pre><h4>Links</h4><pre><code># Red link (LFM standard)\n`Ff00`!`[LINK TEXT`:/page/file.mu]`!`f\n\n# Simple red link\n`Ff00`[Link Text`:/page/file.mu]`f</code></pre><h4>Colors</h4><pre><code>`Ff00Red`f\n`F0f0Green`f\n`F777Gray`f\n`F888Darker gray`f\n`F555Dim`f</code></pre><p>Format: <code>FRGB</code> (hex digits 0-f). Always close with <code>`f</code>.</p>"
    },
    {
      "id": "static-pages",
      "title": "Static Pages",
      "content": "<p>Plain text files with <code>.mu</code> extension. No executable flag needed.</p><h4>Example: about.mu</h4><pre><code>>About This Node\n-=\n\nThis node provides resources for field communications.\n\n>Contact\n-\nLXMF: abc123...\n\n-\n[`Ff00Back to Home`:/page/index.mu]`f</code></pre><h4>Rules</h4><ul><li>File permissions: 644</li><li>No shebang line</li><li>No executable flag</li></ul>"
    },
    {
      "id": "dynamic-pages",
      "title": "Dynamic Pages (Python)",
      "content": "<p>Executable Python scripts that generate Micron output. From LFM production node:</p><h4>Requirements</h4><ol><li>Shebang: <code>#!/usr/bin/env python3</code></li><li>Executable: <code>chmod 755 page.mu</code></li><li>First line after shebang: <code>print(\"#!c=60\")</code> (cache timeout in seconds)</li><li>Output Micron markup to stdout</li></ol><h4>Example: Node Status</h4><pre><code>#!/usr/bin/env python3\nprint(\"#!c=30\")\n\nimport subprocess\nimport os\nfrom datetime import datetime\n\nprint(\"`c`!NODE STATUS`!`a\")\nprint(\"\")\n\nnow = datetime.utcnow().strftime(\"%Y-%m-%d %H:%M UTC\")\nprint(\"`F777Updated: \" + now + \"`f\")\nprint(\"\")\nprint(\"-=\")\n\n# Fix PATH for rnstatus\nenv = os.environ.copy()\nenv[\"PATH\"] = \"/home/user/.local/bin:\" + env.get(\"PATH\", \"\")\n\nprint(\"`=\")\nresult = subprocess.run([\"rnstatus\"], capture_output=True, text=True, timeout=10, env=env)\nprint(result.stdout.strip())\nprint(\"`=\")\n\nprint(\"\")\nprint(\"`Ff00`[Back`:/page/index.mu]`f\")</code></pre><h4>Example: API Fetch</h4><pre><code>#!/usr/bin/env python3\nprint(\"#!c=60\")\n\nimport urllib.request\nimport json\n\nurl = \"https://api.coingecko.com/api/v3/simple/price?ids=monero&vs_currencies=usd\"\nreq = urllib.request.Request(url, headers={\"User-Agent\": \"NomadNet/1.0\"})\n\ntry:\n    with urllib.request.urlopen(req, timeout=10) as resp:\n        data = json.loads(resp.read().decode())\n        price = data[\"monero\"][\"usd\"]\n        print(f\"`F0f0`!${price:,.2f}`!`f\")\nexcept:\n    print(\"`Ff00Unable to fetch`f\")</code></pre>"
    },
    {
      "id": "lfm-templates",
      "title": "LFM Index Template",
      "content": "<p>Actual index.mu from LFM production node:</p><pre><code>`F555Best viewed on 80+ column terminal`f\n\n`c`!`Ff00LIGHT FIGHTER MANIFESTO`!`f`a\n`cVeteran-Owned Publication`a\n`c`F777Unfiltered. Uncensored. Unconventional.`f`a\n\n-=\n\n`c`Ff00`!`[ARTICLES`:/page/lfm_articles.mu]`!`f    `Ff00`!`[PROJECTS`:/page/projects.mu]`!`f    `Ff00`!`[RESOURCES`:/page/resources.mu]`!`f    `Ff00`!`[SHOP`:/page/shop.mu]`!`f`a\n\n-=\n\n>Mesh Network\n\n  `Ff00`!`[QUICK CHAT`:/page/chat.mu]`!`f\n  Real-time messaging bridged to Matrix #Nomadnet room.\n\n  `Ff00`[Node Status`:/page/node_stats.mu]`f\n  Live statistics for this propagation node.\n\n  `F777LXMF Direct:`f `F0f0lxmf@7a58372d270d58f6148946705a7ca665`f\n\n-=\n\n>Field Tools\n\n  `Ff00`!`[HF PROPAGATION`:/page/hfprop.mu]`!`f\n  Band selection with FreeDV DATAC recommendations.\n\n  `Ff00`[Solar Conditions`:/page/propagation.mu]`f\n  Real-time solar flux, K-index, geomagnetic alerts.\n\n  `Ff00`[Power Planner`:/page/powerplanner.mu]`f\n  Calculate battery runtime for portable operations.\n\n-=\n\n>Connect\n\n  `F777Matrix:`f    #General:matrix.lightfightermanifesto.net\n  `F777Discord:`f   discord.gg/light-fighter-manifesto\n  `F777DMR:`f       TG 320058 CC1 TS2\n\n-=\n\n`c`F777Light_Fighter_Manifesto Propagation Node`f`a\n`c`!lightfightermanifesto.org`!`a</code></pre><p>Key patterns: centered headers with <code>`c...`a</code>, inline navigation, section headers with <code>></code>, contact info block.</p>"
    },
    {
      "id": "matrix-bridge",
      "title": "Matrix Bridge",
      "content": "<p>The LFM node bridges Quick Chat to Matrix, enabling communication between mesh users and Matrix users in real-time.</p><h4>How It Works</h4><pre><code>NomadNet chat.mu\n      ↓ writes to\nshared file (chat_messages.json)\n      ↑ reads from\nchat-sync.py daemon\n      ↓ posts to / reads from\nMatrix room (#Nomadnet)</code></pre><p>The chat.mu page writes messages to a local file. A Python daemon watches the file and syncs bidirectionally with Matrix via the API.</p><h4>Why This Approach</h4><ul><li>NomadNet pages can't make HTTP requests directly to Matrix</li><li>File-based sync works reliably</li><li>Daemon handles Matrix authentication and API calls</li></ul><p>Implementation details available in the LFM-Reticulum project.</p>"
    },
    {
      "id": "propagation-node",
      "title": "Running a Propagation Node",
      "content": "<p>A propagation node stores messages for offline users. Essential for networks where nodes aren't always online.</p><h4>Enable Propagation</h4><p>Edit <code>~/.nomadnetwork/config</code>:</p><pre><code>[propagation]\n  enable_propagation = yes\n  propagation_limit = 256</code></pre><p><code>propagation_limit</code> is MB of storage for held messages.</p><h4>Get Your Propagation Address</h4><p>Check node info in NomadNet, or:</p><pre><code>nomadnet --print-identity</code></pre><p>Share this address with users who should use your node for message storage.</p><h4>LFM Propagation Node</h4><pre><code>a21f547bc1f70043a28c4e2d5b04e570</code></pre>"
    },
    {
      "id": "troubleshooting",
      "title": "Troubleshooting",
      "content": "<h4>Page Not Rendering</h4><ul><li>Check file is in <code>~/.nomadnetwork/storage/pages/</code></li><li>Check file extension is <code>.mu</code></li><li>Static pages: permissions 644, no shebang</li><li>Dynamic pages: permissions 755, shebang present</li></ul><h4>Dynamic Page Errors</h4><pre><code># Test manually\npython3 ~/.nomadnetwork/storage/pages/yourpage.mu</code></pre><p>Check for Python errors in output.</p><h4>rnstatus Not Found in Dynamic Pages</h4><pre><code># Add to top of script:\nimport os\nos.environ['PATH'] += ':' + os.path.expanduser('~/.local/bin')</code></pre><h4>Links Not Working</h4><ul><li>Syntax must be exact: <code>[Text`:/page/file.mu]</code></li><li>Close color codes: <code>[`Ff00Text`:/page/file.mu]`f</code></li><li>Path must start with <code>:/page/</code></li></ul>"
    }
  ]
}
