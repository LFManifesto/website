{{/* Worked Example - Styled calculation/example box */}}
{{/* Usage: {{< worked-example title="WORKED EXAMPLE" >}}content{{< /worked-example >}} */}}

{{ $title := .Get "title" | default "WORKED EXAMPLE" }}

<div class="worked-example">
  <div class="example-header">
    <span class="example-label">{{ $title }}</span>
  </div>
  <div class="example-body">
    {{ .Inner | markdownify }}
  </div>
</div>

<style>
.worked-example {
  background: #111;
  border: 1px solid #333;
  border-left: 3px solid #c41e3a;
  border-radius: 4px;
  margin: 2rem 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

.worked-example .example-header {
  background: #1a1a1a;
  padding: 0.75rem 1rem;
  border-bottom: 1px solid #333;
}

.worked-example .example-label {
  color: #c41e3a;
  font-size: 0.75rem;
  font-weight: 700;
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

.worked-example .example-body {
  padding: 1.5rem;
}

.worked-example .example-body p {
  margin: 0 0 1rem 0;
  color: #ccc;
  line-height: 1.6;
}

.worked-example .example-body p:last-child {
  margin-bottom: 0;
}

/* Style for the scenario/context line */
.worked-example .example-body > p:first-child {
  color: #999;
  font-style: italic;
  padding-bottom: 1rem;
  border-bottom: 1px solid #222;
  margin-bottom: 1.25rem;
}

/* Data rows - lines with colons become key-value pairs */
.worked-example .example-body p strong {
  color: #e0e0e0;
}

/* Calculation styling */
.worked-example .calc-row {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  padding: 0.5rem 0;
  border-bottom: 1px solid #1a1a1a;
}

.worked-example .calc-row:last-child {
  border-bottom: none;
}

.worked-example .calc-label {
  color: #888;
  font-size: 0.9rem;
}

.worked-example .calc-value {
  color: #e0e0e0;
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  font-size: 0.95rem;
  font-weight: 600;
}

/* Equation blocks */
.worked-example .equation {
  background: #0a0a0a;
  border: 1px solid #222;
  border-radius: 4px;
  padding: 1rem 1.25rem;
  margin: 1rem 0;
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  color: #4a4;
  font-size: 0.95rem;
  text-align: center;
}

.worked-example .equation.result {
  border-color: #333;
  color: #c41e3a;
  font-weight: 600;
}

/* Inline code for values */
.worked-example code {
  background: #0a0a0a;
  border: 1px solid #222;
  border-radius: 3px;
  padding: 0.15em 0.4em;
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  font-size: 0.9em;
  color: #c41e3a;
}

/* Data table within example */
.worked-example .data-grid {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 0.5rem 2rem;
  margin: 1rem 0;
  padding: 1rem;
  background: #0a0a0a;
  border-radius: 4px;
}

.worked-example .data-grid dt {
  color: #888;
  font-size: 0.9rem;
}

.worked-example .data-grid dd {
  color: #e0e0e0;
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  font-weight: 600;
  text-align: right;
  margin: 0;
}

/* Conclusion/result callout */
.worked-example .conclusion {
  margin-top: 1.25rem;
  padding: 1rem;
  background: rgba(196, 30, 58, 0.1);
  border-left: 2px solid #c41e3a;
  color: #ccc;
  font-size: 0.95rem;
}

.worked-example .conclusion p {
  margin: 0;
}
</style>
